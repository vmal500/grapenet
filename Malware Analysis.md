# Malware Analysis Sandbox Environment
Disclaimer: These are basic setup instructions from a non-expert perspective

## A Quick Update on Windows Setup
Just a heads up - if you're looking to set up a Windows 11 dev VM for Flare VM, you might hit a snag. As of October 23, 2024, the installation is temporarily disabled. I'll update this post once it's back up and running.

## The Importance of Proper Networking
When you're diving into malware analysis, one of the most critical aspects is creating a secure environment. Think of it as building a containment facility - you want to be able to study dangerous specimens without risking contamination of your other systems.

### The Isolation Strategy
I've set up VLAN 40 as my quarantine zone. Here's why this matters:
- It acts like a digital containment unit
- VMs in this network can only talk to each other
- Nothing in or out to other networks
- Perfect for safely examining potentially dangerous malware

### Getting Files Into the Sandbox
There are two main ways I've found to transfer malicious samples:
1. Download them on your physical machine and use VM shared folders to transfer
2. Use your DFIR VM to download and then SCP them over (this is actually the better option)

## Setting Up REMnux - a Linux Malware Analysis Lab

REMnux is a distro packed with malware analysis and reverse-engineering tools. Getting it running is pretty straightforward:

### Initial Setup Steps
1. Grab the virtual appliance from the REMnux download page
2. Import it into your VM software
3. Log in with these credentials:
   ```
   Username: remnux
   Password: malware
   ```

### Network Configuration
Here's where things get a bit more technical. First, you'll want to start with NAT networking to get your updates:

```bash
sudo apt update
sudo apt upgrade -y
```

After that's done, it's time to move into our isolated VLAN 40. You'll need to edit your network config file at `/etc/netplan/01-netcfg.yaml`. Here's what mine looks like:

```yaml
network:
  version: 2
  renderer: networkd
  ethernets:
    ens33:
      dhcp4: no
      addresses: [172.16.40.99/24]
      routes:
        - to: default
          via: 172.16.40.254
      nameservers:
          addresses: [172.16.40.254]
          search: [grapenet.mylab]
```

### Making It All Work
Before you commit to any network changes, always test them first:
```bash
sudo netplan try
```

If everything looks good, apply the changes:
```bash
sudo netplan apply
sudo systemctl restart systemd-networkd
```

> **Note:** Before analyzing malware, create a snapshot of your clean VM setup. This allows you to revert to a clean state before each analysis.

## Navigation

[← Back to Digital Forensics and Incident Response (DFIR)](Digital%20Forensics%20and%20Incident%20Response%20(DFIR).md) | [Next: Domain Controller (Windows Server) →](Corporate%20LAN%20Domain%20Controller.md)
